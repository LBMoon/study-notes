### 爬虫进阶

#### 一、综述

##### 1.js常见加密算法剖析

- 线性散列MD5算法
- 对称加密DES/AES算法
- 非对称加密算法RSA
- base64伪加密
- https证书秘钥加密

##### 2.可以处理的爬虫问题

- 模拟登录中密码和其他请求参数的加密处理
- 动态加载且加密数据的捕获和破解
- 重点：找寻到js算法和解密相关流程的编码于处理套路/技巧，大幅度提升处理相关问题得效率

#### 二、加密算法

##### 1.Md5加密

- 加密特征：可以产生一个128位（16字节）的散列值（hash value），且加密之后产生一个固定长度的（31或者16位）的数据
- 一般注册账号的密码就是MD5加密
- 解密：后边讲

##### 2.DES/AES加密（秘钥加密）

- DES:使用秘钥加密算法，加密解密是同样的秘钥（使用较多 ）
- AES:来替代DES
  - 与AES的区别
    - DES加密后密文长度是8的整数倍
    - AES加密后密文长度是16的整数倍
  - 应用场景不同
    - 企业开发使用DES足够安全
    - 如果要求高，使用AES
  - DES和AES切换只需要修改Crytpo.AES <=> Crypto.DES
- 使用DES/AES进行数据交互时要求双方拥有相同的秘钥
- 破解方法：
  - 暴力破解
  - DES如果使用56位的秘钥，则可能的秘钥数量是2的56次方，只要算力够大还是可以破解的
- DES算法入口参数有：
  - Key、Data、Mode、padding
    - key：7个字节共56位，是DES算法的工作秘钥
    - Data是8个字节64位，是要被加密或者被解密的数据
    - Mode是DES的工作方式
    - padding为填充模式，如果加密后密文的长度达不到指定整数倍（8个字节、16个字节），填充对应的字符，padding的赋值固定为Crypto.pad.Pkcs7即可

##### 3.RSA加密

- RSA加密：
  - RSA加密是一种非对称加密算法，在公开秘钥加密和电子商业中RSA被广泛应用
- 非对称加密算法需要有两个秘钥：
  - 公开秘钥（publickey：简称公钥）
  - 私有秘钥（privatekey：简称私钥）
  - 公钥和私钥是一对，如果用公钥对数据进行加密，只用应用对应的私钥才能解密。因为加密和解密所使用的是两个不同的秘钥，所以这种算法叫做非对称加密算法
- 注意
  - 使用时都是使用公钥进行加密，私钥进行解密。公钥可以公开，私钥进行保留
  - 算法强度复杂、安全依赖于算法与秘钥但是由于其算法的复杂，而使得加密解密速度没有对称加密解密的速度快。
- 使用场景
  - 用户输入支付密码时会使用RSA加密
  - 私钥是通过公钥进行解密，私钥是通过公钥计算生成的。

##### 4.base64

- Base64是一种使用64个字符表示任意二进制数据的方法，base64是一种编码方式而不是加密算法， 只是看上去像加密而已。
- Base64使用A-Z,a-z，0-9，+，/ 这64个字符实现对数据的加密

#### 三、js逆向

##### 1.调试工具：发条JS调试工具

##### 2.算法改写：

- 打断点进行调试
- 代码调试时，如果发现了相关变量的缺失，一般给定义成空字典（对象）
- 如果内置函数找不到，可以改写成 [内置函数] = this
- 

##### 3.PyExecJs

- 使用python执行JS代码
- 使用

  ```python
  import execjs
  # 实例化一个node对象
  
  node = execjs.get()
  
  # 进行js原文件的编译
  
  ctx = node.compile(open('./wechat.js',encoding = 'utf-8').read())
  
  #执行js函数
  funcName = ''
  pwd = ctx.eval(funcName)
  print(pwd)
  ```



